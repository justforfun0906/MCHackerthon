<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=128, height=160, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¿·ä½ æ‰“å·¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 128px;
            height: 160px;
            font-family: Arial, sans-serif;
            font-size: 8px;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .app {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            color: white;
        }
        
        /* é ‚éƒ¨ç‹€æ…‹æ¬„ */
        .status-bar {
            height: 12px;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 4px;
            font-size: 6px;
        }
        
        /* ä¸»è¦å…§å®¹å€åŸŸ */
        .main-content {
            flex: 1;
            padding: 4px;
            display: flex;
            flex-direction: column;
        }
        
        /* ç”¨æˆ¶è³‡è¨Šå¡ */
        .user-card {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            padding: 4px;
            margin-bottom: 4px;
            backdrop-filter: blur(10px);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            font-size: 7px;
        }
        
        .avatar {
            width: 16px;
            height: 16px;
            background: #ffd700;
            border-radius: 50%;
            margin-right: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 2px;
            font-size: 6px;
        }
        
        /* å·¥ä½œåˆ—è¡¨ */
        .job-section {
            flex: 1;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
            padding: 4px;
            margin-bottom: 4px;
        }
        
        .section-title {
            font-size: 7px;
            font-weight: bold;
            margin-bottom: 3px;
            text-align: center;
        }
        
        .job-list {
            max-height: 60px;
            overflow-y: auto;
        }
        
        .job-item {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            padding: 3px;
            margin-bottom: 2px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 6px;
        }
        
        .job-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .job-item.completed {
            background: rgba(0,255,0,0.2);
        }
        
        .job-item.in-progress {
            background: rgba(255,255,0,0.2);
        }
        
        .job-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .job-reward {
            color: #ffd700;
            font-weight: bold;
        }
        
        /* åº•éƒ¨æŒ‰éˆ•å€ */
        .bottom-nav {
            height: 20px;
            background: rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        
        .nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 6px;
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 2px;
            transition: background 0.2s;
        }
        
        .nav-btn.active {
            background: rgba(255,255,255,0.2);
        }
        
        .nav-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        
        /* é€²åº¦æ¢ */
        .progress-bar {
            width: 100%;
            height: 3px;
            background: rgba(0,0,0,0.2);
            border-radius: 2px;
            overflow: hidden;
            margin: 2px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00aaff);
            border-radius: 2px;
            transition: width 0.3s;
            width: 0%;
        }
        
        /* å½ˆçª— */
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: white;
            color: black;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            font-size: 7px;
            max-width: 100px;
        }
        
        .modal-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 3px 6px;
            border-radius: 2px;
            font-size: 6px;
            margin: 2px;
            cursor: pointer;
        }
        
        /* æ»¾å‹•æ¢ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 2px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 1px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- ç‹€æ…‹æ¬„ -->
        <div class="status-bar">
            <span>è¿·ä½ æ‰“å·¥</span>
            <span id="currentTime">00:00</span>
        </div>
        
        <!-- ä¸»è¦å…§å®¹ -->
        <div class="main-content">
            <!-- ç”¨æˆ¶è³‡è¨Šå¡ -->
            <div class="user-card">
                <div class="user-info">
                    <div class="avatar">ğŸ¥</div>
                    <div>
                        <div id="userName">æ–°æ‰‹å°é›</div>
                        <div class="stats">
                            <span>ç­‰ç´š: <span id="userLevel">1</span></span>
                            <span>é‡‘å¹£: <span id="userCoins">50</span></span>
                        </div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="expProgress"></div>
                </div>
            </div>
            
            <!-- å·¥ä½œå€åŸŸ -->
            <div class="job-section">
                <div class="section-title">ğŸ“‹ å¯æ¥å·¥ä½œ</div>
                <div class="job-list" id="jobList">
                    <!-- å·¥ä½œé …ç›®å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å°èˆª -->
        <div class="bottom-nav">
            <button class="nav-btn active" onclick="switchTab('jobs')">å·¥ä½œ</button>
            <button class="nav-btn" onclick="switchTab('shop')">å•†åº—</button>
            <button class="nav-btn" onclick="switchTab('profile')">å€‹äºº</button>
        </div>
        
        <!-- å½ˆçª— -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <div id="modalTitle"></div>
                <div id="modalMessage"></div>
                <button class="modal-btn" onclick="confirmAction()">ç¢ºèª</button>
                <button class="modal-btn" onclick="closeModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
        let appState = {
            currentTab: 'jobs',
            selectedJob: null,
            user: {
                name: 'æ–°æ‰‹å°é›',
                level: 1,
                coins: 50,
                exp: 25
            },
            jobs: [
                { id: 1, name: 'çœ‹å»£å‘Š', reward: 5, time: 30, completed: false, inProgress: false, progress: 0 },
                { id: 2, name: 'ç°½åˆ°', reward: 10, time: 5, completed: false, inProgress: false, progress: 0 },
                { id: 3, name: 'åˆ†äº«', reward: 15, time: 10, completed: false, inProgress: false, progress: 0 },
                { id: 4, name: 'è©•åˆ†', reward: 20, time: 15, completed: false, inProgress: false, progress: 0 },
                { id: 5, name: 'é‚€è«‹', reward: 50, time: 60, completed: false, inProgress: false, progress: 0 }
            ]
        };

        // DOMå…ƒç´ å¼•ç”¨
        const elements = {
            currentTime: document.getElementById('currentTime'),
            userName: document.getElementById('userName'),
            userLevel: document.getElementById('userLevel'),
            userCoins: document.getElementById('userCoins'),
            expProgress: document.getElementById('expProgress'),
            jobList: document.getElementById('jobList'),
            modal: document.getElementById('modal'),
            modalTitle: document.getElementById('modalTitle'),
            modalMessage: document.getElementById('modalMessage')
        };

        // æ™‚é–“æ›´æ–°
        function updateTime() {
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                             now.getMinutes().toString().padStart(2, '0');
            elements.currentTime.textContent = timeString;
        }

        // æ›´æ–°ç”¨æˆ¶ç•Œé¢
        function updateUserInterface() {
            elements.userName.textContent = appState.user.name;
            elements.userLevel.textContent = appState.user.level;
            elements.userCoins.textContent = appState.user.coins;
            elements.expProgress.style.width = appState.user.exp + '%';
        }

        // æ¸²æŸ“å·¥ä½œåˆ—è¡¨
        function renderJobList() {
            elements.jobList.innerHTML = '';
            appState.jobs.forEach(job => {
                const jobElement = document.createElement('div');
                jobElement.className = 'job-item';
                if (job.completed) jobElement.classList.add('completed');
                if (job.inProgress) jobElement.classList.add('in-progress');
                
                jobElement.innerHTML = `
                    <div class="job-info">
                        <span>${job.name}</span>
                        <span class="job-reward">+${job.reward}</span>
                    </div>
                    ${job.inProgress ? `<div class="progress-bar">
                        <div class="progress-fill" style="width: ${job.progress}%"></div>
                    </div>` : ''}
                `;
                
                jobElement.addEventListener('click', () => selectJob(job));
                elements.jobList.appendChild(jobElement);
            });
        }

        // é¸æ“‡å·¥ä½œ
        function selectJob(job) {
            if (job.completed) return;
            
            appState.selectedJob = job;
            elements.modalTitle.textContent = job.name;
            elements.modalMessage.textContent = `ç²å¾— ${job.reward} é‡‘å¹£\né ä¼° ${job.time} ç§’`;
            showModal();
        }

        // é¡¯ç¤ºå½ˆçª—
        function showModal() {
            elements.modal.classList.add('show');
        }

        // é—œé–‰å½ˆçª—
        function closeModal() {
            elements.modal.classList.remove('show');
        }

        // ç¢ºèªæ“ä½œ
        function confirmAction() {
            if (appState.selectedJob && !appState.selectedJob.inProgress) {
                appState.selectedJob.inProgress = true;
                appState.selectedJob.progress = 0;
                renderJobList();
            }
            closeModal();
        }

        // åˆ‡æ›æ¨™ç±¤
        function switchTab(tab) {
            appState.currentTab = tab;
            const navBtns = document.querySelectorAll('.nav-btn');
            navBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // å·¥ä½œé€²åº¦æ›´æ–°
        function updateJobProgress() {
            let hasUpdates = false;
            appState.jobs.forEach(job => {
                if (job.inProgress && !job.completed) {
                    job.progress += Math.random() * 10;
                    if (job.progress >= 100) {
                        job.progress = 100;
                        job.completed = true;
                        job.inProgress = false;
                        appState.user.coins += job.reward;
                        appState.user.exp += 5;
                        if (appState.user.exp >= 100) {
                            appState.user.level++;
                            appState.user.exp = 0;
                        }
                        hasUpdates = true;
                    }
                    hasUpdates = true;
                }
            });
            
            if (hasUpdates) {
                updateUserInterface();
                renderJobList();
            }
        }

        // åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
        function init() {
            updateTime();
            updateUserInterface();
            renderJobList();
            
            // è¨­ç½®å®šæ™‚å™¨
            setInterval(updateTime, 1000);
            setInterval(updateJobProgress, 1000);
            
            // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰
            elements.modal.addEventListener('click', (e) => {
                if (e.target === elements.modal) {
                    closeModal();
                }
            });
        }

        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>